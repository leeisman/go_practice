syntax = "proto3";

package nc;
option go_package = "gitlab.silkrode.com.tw/team_golang/jys/infra/pb/nc";

import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "gitlab.silkrode.com.tw/golang/gopher/pb/v2/commonpb/nullable.proto";
import "google/protobuf/timestamp.proto";

option (gogoproto.goproto_registration) = true;
// Enable custom Size method (Required by Marshal and Unmarshal).
option (gogoproto.sizer_all) = true;
// Enable custom Marshal method.
option (gogoproto.marshaler_all) = true;
// Enable custom Unmarshal method.
option (gogoproto.unmarshaler_all) = true;

message Notification {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    int64 id                                = 1 [(gogoproto.customname) = "ID"];
    string title                            = 2;
    string content                          = 3;
    NotificationType type                   = 4;
    google.protobuf.Timestamp published_at  = 5 [(gogoproto.nullable) = false, (gogoproto.stdtime) = true];
}

message UserNotification {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    int64 id                                = 1 [(gogoproto.customname) = "ID"];
    int64 user_id                           = 2 [(gogoproto.customname) = "UserID"];
    int64 notification_id                   = 3 [(gogoproto.customname) = "NotificationID"];
    commonpbv2.NullTime read_at             = 4 [(gogoproto.nullable) = true, (gogoproto.stdtime) = true];
    Notification notification               = 5;
}

message User {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    int64 user_id                           = 1 [(gogoproto.customname) = "ID"];
    string user_device_id                   = 2 [(gogoproto.customname) = "UserDeviceID"];
}

enum NotificationType {
    option (gogoproto.goproto_enum_prefix) = false;
    NotificationType_Unknown               = 0;
    NotificationType_Announcement          = 1;
    NotificationType_DeviceVerification    = 2;
    NotificationType_LoginNewIP            = 3;
    NotificationType_Deposit               = 4;
    NotificationType_Withdraw              = 5;
    NotificationType_TradeBuy              = 6;
    NotificationType_TradeSell             = 7;
    NotificationType_Feedback              = 8;  // 工單信息通知
}