syntax = "proto3";

package nc;
option go_package = "gitlab.silkrode.com.tw/team_golang/jys/infra/pb/nc";

import "gitlab.silkrode.com.tw/golang/gopher/pb/v2/commonpb/pagination.proto";
import "gitlab.silkrode.com.tw/golang/gopher/pb/v2/commonpb/sorting.proto";
import "gitlab.silkrode.com.tw/golang/gopher/pb/v2/commonpb/base_where.proto";
import "github.com/gogo/protobuf/gogoproto/gogo.proto";
import "pb/nc/nc_model.proto";
import "google/protobuf/timestamp.proto";

option (gogoproto.goproto_registration) = true;
// Enable custom Size method (Required by Marshal and Unmarshal).
option (gogoproto.sizer_all) = true;
// Enable custom Marshal method.
option (gogoproto.marshaler_all) = true;
// Enable custom Unmarshal method.
option (gogoproto.unmarshaler_all) = true;

message CreateNotificationReq {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    string title                            = 1;
    string content                          = 2;
    NotificationType type                   = 3;
    google.protobuf.Timestamp published_at  = 4 [(gogoproto.nullable) = true, (gogoproto.stdtime) = true];
    repeated User users                     = 5;
}

message CreateNotificationResp {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    Notification notification               = 1;
    int64 publishTotal                      = 2;
}

message PushNotification {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    int64 NotificationID                    = 1 [(gogoproto.customname) = "NotificationID"];
    string title                            = 2;
    string content                          = 3;
    NotificationType type                   = 4;
    google.protobuf.Timestamp published_at  = 5 [(gogoproto.nullable) = true, (gogoproto.stdtime) = true];
    repeated User users                     = 6;
}

message ListNotificationReq {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    WhereNotificationCondition where_cond   = 1 [(gogoproto.nullable) = false];
}

message ListNotificationResp {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    repeated Notification notifications     = 1;
    int64 total                             = 2;
}

message UpdateNotificationReq {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    WhereNotificationCondition where_cond   = 1 [(gogoproto.nullable) = false];
    Notification notification               = 2;
}

message DeleteNotificationReq {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    WhereNotificationCondition where_cond   = 1 [(gogoproto.nullable) = false];
}

message RecordReadUserNotificationReq {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    int64 user_id                           = 1 [(gogoproto.customname) = "UserID"];
    repeated int64 user_notification_ids    = 2 [(gogoproto.customname) = "UserNotificationIDs"];
}

message ListUserNotificationReq {
    option (gogoproto.goproto_unrecognized)   = false;
    option (gogoproto.goproto_unkeyed)        = false;
    option (gogoproto.goproto_sizecache)      = false;
    WhereUserNotificationCondition where_cond = 1 [(gogoproto.nullable) = false];
}

message ListUserNotificationResp {
    option (gogoproto.goproto_unrecognized)      = false;
    option (gogoproto.goproto_unkeyed)           = false;
    option (gogoproto.goproto_sizecache)         = false;
    repeated UserNotification user_notifications = 1;
    int64 total                                  = 2;
}

message WhereNotificationCondition {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    commonpbv2.Pagination pagination        = 1 [(gogoproto.nullable) = false];
    commonpbv2.BaseWhere base_where         = 2 [(gogoproto.nullable) = false];
    commonpbv2.Sorting sorting              = 3 [(gogoproto.nullable) = false];
    Notification notification               = 4 [(gogoproto.nullable) = false];
}

message WhereUserNotificationCondition {
    option (gogoproto.goproto_unrecognized) = false;
    option (gogoproto.goproto_unkeyed)      = false;
    option (gogoproto.goproto_sizecache)    = false;
    commonpbv2.Pagination pagination        = 1 [(gogoproto.nullable) = false];
    commonpbv2.BaseWhere base_where         = 2 [(gogoproto.nullable) = false];
    commonpbv2.Sorting sorting              = 3 [(gogoproto.nullable) = false];
    UserNotification user_notification      = 4 [(gogoproto.nullable) = false];
}